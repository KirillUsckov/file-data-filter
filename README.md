# file-data-filter

CLI-утилита для разборa входных файлов и разнесения данных по типам (строки / целые / числа с плавающей точкой) с сохранением результатов в отдельные файлы и опциональным выводом статистики. 

Java 11, сборка — Maven.

Собранный jar файл:
[Скачать JAR](cli/file-data-filter-1.0.jar?raw=1)

## Требования
- **Java:** 11  
- **Система сборки:** Apache Maven (плагин `maven-compiler-plugin` 3.11.0) 

## Сборка
```bash
mvn -q -DskipTests package
```

## Запуск 
Минимальный запуск c файлами на входе: 
java -jar target/file-data-filter-1.0.jar input1.txt input2.txt

Артефакт file-data-filter-1.0.jar формируется стандартной сборкой Maven из artifactId и version. 

Доступные параметры CLI:

* -o <path> — путь к каталогу с результатами.
* -p <prefix> — префикс для имён выходных файлов.
* -a — режим append (добавлять строки к существующим файлам; по умолчанию файлы перезаписываются).
* -s — краткая статистика (только количество элементов по каждому типу).
* -f — полная статистика (для чисел: min, max, sum, avg; для строк: длина min/max).

Пути к входным файлам в конце.

Пример с параметрами:

Запуск с параметрами для 
* изменения конечной директории
* добавления префикса для файлов с результатами
* изменения режима записи на добавление строк к существующим файлам
* вывода полной статистики в консоли
```bash
java -jar path/to/jar/file-data-filter-1.0.jar \
  -o ./out -p result_ -a -f \
  data1.txt data2.txt
```

## Особенности реализации (дополнительно к заданию)

**Парсер аргументов** Поддерживается только формат ```-k v```. Неизвестные опции, дубликаты и опции без значения фиксируются как предупреждение и игнорируются; пути проверяются, отсутсвие валидных файлов записывается в список ошибок. Возвращается ```CommandLineParseResult``` (содержит полученные аргументы, список файлов, предупреждения, ошибки). 

**Порядок и обработка ошибок в файлах** Файлы обрабатываются в порядке перечисления, сбой в одном не блокирует остальные. При отсутсвии успешно обработанных файлов происходит выход с кодом 2. 

**Запись результатов** Запись через `Files.newBufferedWriter(…, UTF-8, CREATE+APPEND|TRUNCATE_EXISTING)`. Режим -a включает `APPEND` режим записи - строки добавляются к существующему файлу.

**Определение типов** Опредление осуществяется посредством попытки парсинга полученной строки: 
`Long.parseLong` -> `Float.parseFloat` -> иначе `Строка`.

## Коды выхода

0 — все файлы обработаны успешно

1 — частичный успех (есть отсутствующие/непрочитанные файлы, но хотя бы один обработан)

2 — фатальная ошибка парсинга аргументов или ни один файл не обработан

## Зависимости

Используемые библиотеки:

* Lombok 1.18.24 — генерация шаблонного кода.
```maven
<dependency>
  <groupId>org.projectlombok</groupId>
  <artifactId>lombok</artifactId>
  <version>1.18.24</version>
</dependency>
```

* SLF4J API 2.0.13 — интерфейс логирования
```maven
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>2.0.13</version>
</dependency>
```

* Logback Classic 1.5.6 — реализация логирования
```maven
<dependency>
  <groupId>ch.qos.logback</groupId>
  <artifactId>logback-classic</artifactId>
  <version>1.5.6</version>
</dependency>
```
